const te=document.getElementById("app-data"),K=te?JSON.parse(te.dataset.payload||"{}"):{},k={lbRegion:"na1",lbTier:"challenger"},O=n=>(n||"").toString().toLowerCase().trim(),h=n=>String(n??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");function W(n){document.documentElement.setAttribute("data-theme",n),localStorage.setItem("sc-theme",n);const e=document.getElementById("themeToggle");e&&(e.textContent=n==="dark"?"Light Mode":"Dark Mode")}function oe(){const n=localStorage.getItem("sc-theme");if(n){W(n);return}W(window.matchMedia?.("(prefers-color-scheme:dark)").matches?"dark":"light")}function ie(n){document.querySelectorAll(".nav-link").forEach(e=>e.classList.toggle("active",e.dataset.section===n))}function Q(n){document.querySelectorAll("section.content").forEach(i=>{i.style.display="none"});const e=document.getElementById(n);e&&(e.style.display="",ie(n))}function le(n){const e=O(n);document.querySelectorAll(".champ-card").forEach(i=>{const m=i.dataset.champName||"";i.style.display=!e||m.includes(e)?"":"none"})}function se(n){document.querySelectorAll(".cost-filter").forEach(e=>e.classList.toggle("active",e.dataset.cost===n)),document.querySelectorAll(".champ-cost-group").forEach(e=>{n==="all"?e.style.display="":e.style.display=e.dataset.costGroup===n?"":"none"})}function ce(n){const e=O(n);document.querySelectorAll(".item-card").forEach(i=>{const m=i.dataset.itemName||"";i.style.display=!e||m.includes(e)?"":"none"})}function de(n){document.querySelectorAll(".item-cat-filter").forEach(e=>e.classList.toggle("active",e.dataset.cat===n)),document.querySelectorAll(".item-section").forEach(e=>{n==="all"?e.style.display="":e.style.display=e.dataset.itemCat===n?"":"none"})}function me(n){const e=O(n);document.querySelectorAll(".trait-card").forEach(i=>{const m=i.dataset.traitName||"";i.style.display=!e||m.includes(e)?"":"none"})}function ue(n){const e=O(n);document.querySelectorAll(".augment-card").forEach(i=>{const m=i.dataset.augName||"";i.style.display=!e||m.includes(e)?"":"none"})}function ge(n){document.querySelectorAll(".aug-tier-filter").forEach(e=>e.classList.toggle("active",e.dataset.tier===n)),document.querySelectorAll(".augment-card").forEach(e=>{n==="all"?e.style.display="":e.style.display=e.dataset.augTier===n?"":"none"})}function pe(n){return K.champions?.find(e=>e.championId===n)}function X(n){const e=pe(n);if(!e)return;const i=document.getElementById("champModal"),m=document.getElementById("modalChampDetails");m.innerHTML="",i.classList.remove("hidden"),i.setAttribute("aria-hidden","false");const d={1:"var(--cost-1)",2:"var(--cost-2)",3:"var(--cost-3)",4:"var(--cost-4)",5:"var(--cost-5)"},B={1:"var(--cost-1-bg)",2:"var(--cost-2-bg)",3:"var(--cost-3-bg)",4:"var(--cost-4-bg)",5:"var(--cost-5-bg)"},E=d[e.cost]||"var(--brand)",S=B[e.cost]||"var(--brand-subtle)";let a="";a+='<div class="cd-header">',a+='<img class="cd-portrait" src="'+(e.tileIcon||e.icon)+'" alt="'+h(e.name)+'" style="border:3px solid '+E+'" />',a+='<div class="cd-info">',a+='<h2 class="cd-name" style="color:'+E+'">'+h(e.name)+"</h2>",a+='<span class="cd-cost-pill" style="background:'+S+";color:"+E+";border:1px solid color-mix(in srgb,"+E+' 25%,transparent)">'+e.cost+"-Cost</span>",a+='<div class="cd-traits-list">',e.traits.forEach(c=>{a+='<span class="cd-trait-tag">'+h(c)+"</span>"}),a+="</div>",a+="</div></div>";const l=e.stats,x=typeof l.attackSpeed=="number"&&!Number.isInteger(l.attackSpeed)&&String(l.attackSpeed).split(".")[1]?.length>2?l.attackSpeed.toFixed(2):String(l.attackSpeed);if(a+='<div class="cd-stats-grid">',a+=L("HP",l.hp),a+=L("Mana",l.initialMana+" / "+l.mana),a+=L("Damage",l.damage),a+=L("Atk Spd",x),a+=L("Armor",l.armor),a+=L("MR",l.magicResist),a+=L("Range",l.range),a+=L("Crit",(l.critChance*100).toFixed(0)+"%"),a+="</div>",e.ability&&e.ability.name){if(a+='<div class="cd-ability-section"><h4>Ability</h4>',a+='<div class="cd-ability-box">',a+='<div class="cd-ability-header">',e.ability.icon&&(a+='<img class="cd-ability-icon" src="'+e.ability.icon+'" alt="'+h(e.ability.name)+'" loading="lazy" />'),a+='<span class="cd-ability-name">'+h(e.ability.name)+"</span>",a+="</div>",e.ability.desc){let t=function(r){if(s[r])return s[r];if(g[r.toLowerCase()])return s[g[r.toLowerCase()]];for(var p=/^(Modified|Total|Reduced|Bonus|FirstCast|SecondCast|ThirdCast)/,o=r;p.test(o);)o=o.replace(p,"");if(o&&o!==r){if(s[o])return s[o];if(g[o.toLowerCase()])return s[g[o.toLowerCase()]];for(var b=["AP","AD","Flat","Base","Percent"],q=0;q<b.length;q++){var y=b[q]+o;if(s[y])return s[y];if(g[y.toLowerCase()])return s[g[y.toLowerCase()]]}if(/Damage/i.test(o))for(var w=0;w<b.length;w++){var C=o.replace(/Damage/i,b[w]+"Damage");if(s[C])return s[C];if(g[C.toLowerCase()])return s[g[C.toLowerCase()]]}var f=o.match(/^(.+?)_(\w+)$/);if(f){var v=f[2]+f[1];if(s[v])return s[v];if(g[v.toLowerCase()])return s[g[v.toLowerCase()]]}}for(var I=(o&&o!==r?o:r).toLowerCase(),R=0;R<u.length;R++){var ee=u[R].toLowerCase();if(ee.endsWith(I)||I.endsWith(ee))return s[u[R]]}for(var D=null,z=0,T=0;T<u.length;T++){var F=u[T].toLowerCase();I.includes(F)&&F.length>z?(D=u[T],z=F.length):F.includes(I)&&I.length>z&&(D=u[T],z=I.length)}if(D)return s[D];var ae=o&&o!==r?o:r,V=ae.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z][a-z])/g,"$1 $2").toLowerCase().split(/\s+/);if(V.length>=2){for(var U=null,j=0,_=0;_<u.length;_++){for(var re=u[_].replace(/([a-z])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z][a-z])/g,"$1 $2").toLowerCase().split(/\s+/),G=0,J=0;J<V.length;J++)re.indexOf(V[J])!==-1&&G++;G>j&&(j=G,U=u[_])}if(U&&j>=2)return s[U]}return null};var Z=t;let c=e.ability.desc;const s=e.ability.variables||{};var u=Object.keys(s),g={};u.forEach(function(r){g[r.toLowerCase()]=r}),c=c.replace(/@([^@]+)@/g,function(r,p){if(p.startsWith("TFTUnitProperty"))return"";var o=p.match(/^(.+?)\*(\d+(?:\.\d+)?)$/),b=o?o[1]:p,q=o?parseFloat(o[2]):1,y=t(b);if(!y||!Array.isArray(y))return"?";var w=[y[1],y[2],y[3]].map(function(f){if(f==null)return null;var v=f*q;return v%1===0?String(v):v.toFixed(1).replace(/\.0$/,"")}).filter(function(f){return f!==null});if(w.length===0)return"?";if(w.every(function(f){return f===w[0]}))return w[0];var C=["#a67c52","#94a3b8","#e6a030"];return w.map(function(f,v){return'<span style="color:'+C[v]+';font-weight:600">'+f+"</span>"}).join('<span style="color:var(--muted)">/</span>')});var M={TFT_Keyword_Chill:'<span class="kw-tag">Chill</span>: Reduce attack speed by 30%',TFT_Keyword_Shred:'<span class="kw-tag">Shred</span>: Reduce Magic Resist by 40% for 5 seconds',TFT_Keyword_Wound:'<span class="kw-tag">Wound</span>: Reduce healing received by 33% for 5 seconds',TFT_Keyword_Burn:'<span class="kw-tag">Burn</span>: Deal 2% max Health true damage over 5 seconds. Reduce healing by 33%',TFT_Keyword_Sunder:'<span class="kw-tag">Sunder</span>: Reduce Armor by 40% for 5 seconds'};c=c.replace(/\{\{([^}]+)\}\}/g,function(r,p){return M[p]||""});var A={scaleAD:{label:"AD",color:"#fb923c",svg:'<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><polyline points="14.5 17.5 3 6 3 3 6 3 17.5 14.5"/><line x1="13" y1="19" x2="19" y2="13"/><line x1="16" y1="16" x2="20" y2="20"/><line x1="19" y1="21" x2="21" y2="19"/></svg>'},scaleAP:{label:"AP",color:"#c084fc",svg:'<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>'},scaleAS:{label:"AS",color:"#a3e635",svg:'<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>'},scaleArmor:{label:"Armor",color:"#eab308",svg:'<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>'},scaleMR:{label:"MR",color:"#818cf8",svg:'<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="M12 8l1.5 3H15l-1.5 2L15 16h-2l-1-2-1 2H9l1.5-3L9 11h1.5z"/></svg>'},scaleHealth:{label:"HP",color:"#2dd4bf",svg:'<svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor" stroke="none"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>'},scaleCrit:{label:"Crit",color:"#f87171",svg:'<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><circle cx="12" cy="12" r="10"/><line x1="22" y1="12" x2="18" y2="12"/><line x1="6" y1="12" x2="2" y2="12"/><line x1="12" y1="6" x2="12" y2="2"/><line x1="12" y1="22" x2="12" y2="18"/></svg>'},scaleCritMult:{label:"Crit Dmg",color:"#f87171",svg:'<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><circle cx="12" cy="12" r="10"/><line x1="22" y1="12" x2="18" y2="12"/><line x1="6" y1="12" x2="2" y2="12"/><line x1="12" y1="6" x2="12" y2="2"/><line x1="12" y1="22" x2="12" y2="18"/></svg>'},scaleDA:{label:"Dmg Amp",color:"#a78bfa",svg:'<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>'},scaleDR:{label:"DR",color:"#eab308",svg:'<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>'},scaleSV:{label:"Omnivamp",color:"#fb7185",svg:'<svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor" stroke="none"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>'},scaleSouls:{label:"Souls",color:"#67e8f9",svg:'<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><circle cx="12" cy="10" r="7"/><path d="M8 17c0 2.2 1.8 4 4 4s4-1.8 4-4"/></svg>'},TFTBaseAD:{label:"AD",color:"#fb923c",svg:'<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><polyline points="14.5 17.5 3 6 3 3 6 3 17.5 14.5"/><line x1="13" y1="19" x2="19" y2="13"/><line x1="16" y1="16" x2="20" y2="20"/><line x1="19" y1="21" x2="21" y2="19"/></svg>'}};c=c.replace(/%i:([^%]+)%/g,function(r,p){var o=A[p];return o?'<span class="stat-icon" style="color:'+o.color+'">'+o.svg+"<span>"+o.label+"</span></span>":""}),c=c.replace(/<(?!\/?span\b)[^>]*>/g,"").replace(/&nbsp;/g," ").replace(/\s{2,}/g," ").trim(),c=c.replace(/\(\s*\)/g,"").replace(/\s{2,}/g," ").trim(),a+='<p class="cd-ability-desc">'+c+"</p>"}a+="</div></div>"}m.innerHTML=a}function L(n,e){return'<div class="cd-stat"><div class="cd-stat-value">'+h(String(e))+'</div><div class="cd-stat-label">'+h(n)+"</div></div>"}function P(){const n=document.getElementById("champModal");n.classList.add("hidden"),n.setAttribute("aria-hidden","true")}function fe(n){return K.items?.find(e=>e.uniqueId===n)}function ne(n){const e=fe(n);if(!e)return;const i=document.getElementById("itemModal"),m=document.getElementById("modalItemDetails");m.innerHTML="",i.classList.remove("hidden"),i.setAttribute("aria-hidden","false");let d='<div style="display:flex;align-items:center;gap:1rem;margin-bottom:1rem">';e.icon&&(d+='<img src="'+e.icon+'" alt="" style="width:64px;height:64px;border-radius:10px;border:2px solid var(--border)" />'),d+='<div><h3 style="margin:0;font-family:Exo 2,system-ui;text-transform:uppercase;letter-spacing:.03em">'+h(e.name)+"</h3>";const E={component:"Component",completed:"Completed",emblem:"Emblem",artifact:"Artifact",radiant:"Radiant",support:"Support",other:"Item"}[e.category]||"Item";if(d+='<span style="font-size:.75rem;color:var(--muted);text-transform:uppercase;font-weight:600">'+E+"</span>",d+="</div></div>",e.desc){let a=e.desc.replace(/<[^>]*>/g,"").replace(/@[^@]+@/g,"?");d+='<p style="color:var(--muted);font-size:.9rem;line-height:1.6">'+a+"</p>"}const S=Object.keys(e.effects||{}).filter(a=>!/^\{[0-9a-f]+\}$/i.test(a));S.length&&(d+='<div style="display:flex;flex-wrap:wrap;gap:.4rem;margin-top:.75rem">',S.forEach(a=>{const l=e.effects[a],x=typeof l=="number"&&!Number.isInteger(l)&&String(l).split(".")[1]?.length>2?l.toFixed(2):String(l);d+='<span style="font-size:.72rem;padding:.15rem .4rem;border-radius:6px;background:var(--surface-strong);color:var(--brand);font-weight:600;border:1px solid var(--border)">'+h(a)+": "+h(x)+"</span>"}),d+="</div>"),e.from&&e.from.length&&(d+='<div style="margin-top:1rem"><span style="font-size:.72rem;color:var(--muted);text-transform:uppercase;font-weight:700;letter-spacing:.04em">Recipe</span>',d+='<div style="display:flex;gap:.5rem;margin-top:.35rem">',e.from.forEach(a=>{const l=K.items?.find(x=>x.uniqueId===a);l&&(d+='<div style="display:flex;align-items:center;gap:.3rem;padding:.25rem .5rem;border-radius:8px;background:var(--surface-strong);border:1px solid var(--border)">',l.icon&&(d+='<img src="'+l.icon+'" alt="" style="width:24px;height:24px;border-radius:4px" />'),d+='<span style="font-size:.75rem;font-weight:600">'+h(l.name)+"</span></div>")}),d+="</div></div>"),m.innerHTML=d}function H(){const n=document.getElementById("itemModal");n.classList.add("hidden"),n.setAttribute("aria-hidden","true")}function N(n){const e=document.getElementById("playerModal");if(!e)return;e.classList.remove("hidden");const i=document.getElementById("playerInput");i&&n&&(i.value=n),i&&i.focus()}function $(){const n=document.getElementById("playerModal");if(!n)return;n.classList.add("hidden");const e=document.getElementById("playerSearchResults"),i=document.getElementById("playerProfile");e&&(e.innerHTML=""),i&&(i.innerHTML="",i.classList.add("hidden"))}function Y(){const n=document.getElementById("ovSearch");if(!n)return;const e=n.value.trim();e&&N(e)}function he(){document.querySelectorAll(".nav-link").forEach(t=>t.addEventListener("click",()=>Q(t.dataset.section))),document.querySelectorAll(".ql-card, .ov-stat").forEach(t=>t.addEventListener("click",()=>{t.dataset.section&&Q(t.dataset.section)}));const n=document.getElementById("champSearch");n&&n.addEventListener("input",t=>le(t.target.value)),document.querySelectorAll(".cost-filter").forEach(t=>t.addEventListener("click",()=>se(t.dataset.cost))),document.querySelectorAll(".champ-card").forEach(t=>t.addEventListener("click",()=>{t.dataset.champId&&X(t.dataset.champId)}));const e=document.getElementById("itemSearch");e&&e.addEventListener("input",t=>ce(t.target.value)),document.querySelectorAll(".item-cat-filter").forEach(t=>t.addEventListener("click",()=>de(t.dataset.cat))),document.querySelectorAll(".item-card").forEach(t=>t.addEventListener("click",()=>{t.dataset.itemId&&ne(t.dataset.itemId)}));const i=document.getElementById("traitSearch");i&&i.addEventListener("input",t=>me(t.target.value)),document.querySelectorAll(".trait-desc").forEach(t=>{t.addEventListener("click",()=>{t.classList.toggle("expanded");const r=t.closest(".trait-card");if(!r)return;const p=r.querySelector(".trait-details");if(!p)return;const o=t.classList.contains("expanded");p.style.display=o?"flex":"none";const b=r.querySelector(".trait-breakpoints");b&&(b.style.display=o?"none":"flex")})}),document.querySelectorAll(".trait-champ-entry").forEach(t=>t.addEventListener("click",()=>{t.dataset.champId&&X(t.dataset.champId)})),document.querySelectorAll(".trait-champ-more").forEach(t=>t.addEventListener("click",()=>{const r=t.parentElement.querySelector(".trait-champ-overflow");r&&(r.style.display="contents",t.style.display="none")}));const m=document.getElementById("augmentSearch");m&&m.addEventListener("input",t=>ue(t.target.value)),document.querySelectorAll(".aug-tier-filter").forEach(t=>t.addEventListener("click",()=>ge(t.dataset.tier)));const d=document.getElementById("ovSearch");d&&d.addEventListener("keydown",t=>{t.key==="Enter"&&Y()});const B=document.getElementById("ovSearchBtn");B&&B.addEventListener("click",Y);const E=document.getElementById("closeModalBtn");E&&E.addEventListener("click",P);const S=document.getElementById("champModal");S&&S.addEventListener("click",t=>{t.target===S&&P()});const a=document.getElementById("closeItemModalBtn");a&&a.addEventListener("click",H);const l=document.getElementById("itemModal");l&&l.addEventListener("click",t=>{t.target===l&&H()});const x=document.getElementById("playerModalClose");x&&x.addEventListener("click",$);const u=document.getElementById("playerModal");u&&u.addEventListener("click",t=>{t.target===u&&$()}),document.addEventListener("keydown",t=>{t.key==="Escape"&&(P(),H(),$())});const g=document.getElementById("themeToggle");g&&g.addEventListener("click",()=>W(document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark"));const M=document.getElementById("productSwitcherBtn"),A=document.getElementById("productSwitcherDropdown");M&&A&&(M.addEventListener("click",t=>{t.stopPropagation(),A.classList.toggle("hidden")}),document.addEventListener("click",t=>{!A.contains(t.target)&&t.target!==M&&A.classList.add("hidden")}));const Z=document.getElementById("headerSearchBtn"),c=document.getElementById("headerSearchInput"),s=document.getElementById("headerSearch");Z&&Z.addEventListener("click",()=>{if(!s.classList.contains("open")){s.classList.add("open"),c.focus();return}const t=c?c.value.trim():"";t&&N(t)}),c&&c.addEventListener("keydown",t=>{if(t.key==="Enter"){const r=c.value.trim();r&&N(r)}t.key==="Escape"&&(s.classList.remove("open"),c.value="")}),document.querySelectorAll(".region-btn").forEach(t=>t.addEventListener("click",()=>{k.lbRegion=t.dataset.region,document.querySelectorAll(".region-btn").forEach(r=>r.classList.toggle("active",r.dataset.region===k.lbRegion)),document.getElementById("lbStatus").textContent="Region: "+k.lbRegion.toUpperCase()+" — Connect Riot API to load data."})),document.querySelectorAll(".lb-tier-tab").forEach(t=>t.addEventListener("click",()=>{k.lbTier=t.dataset.tier,document.querySelectorAll(".lb-tier-tab").forEach(r=>r.classList.toggle("active",r.dataset.tier===k.lbTier)),document.getElementById("lbStatus").textContent=k.lbTier.charAt(0).toUpperCase()+k.lbTier.slice(1)+" — "+k.lbRegion.toUpperCase()+" — Connect Riot API to load data."}))}document.addEventListener("DOMContentLoaded",()=>{"scrollRestoration"in history&&(history.scrollRestoration="manual"),window.scrollTo(0,0),oe(),he(),Q("overview")});window.Scouted={showChampionDetails:X,closeChampModal:P,showItemDetails:ne,closeItemModal:H,openPlayerModal:N,closePlayerModal:$,overviewSearch:Y};
