const P=document.getElementById("app-data"),N=P?JSON.parse(P.dataset.payload||"{}"):{},h={lbRegion:"na1",lbTier:"challenger"},w=a=>(a||"").toString().toLowerCase().trim(),u=a=>String(a??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");function R(a){document.documentElement.setAttribute("data-theme",a),localStorage.setItem("sc-theme",a);const e=document.getElementById("themeToggle");e&&(e.textContent=a==="dark"?"Light Mode":"Dark Mode")}function F(){const a=localStorage.getItem("sc-theme");if(a){R(a);return}R(window.matchMedia?.("(prefers-color-scheme:dark)").matches?"dark":"light")}function O(a){document.querySelectorAll(".nav-link").forEach(e=>e.classList.toggle("active",e.dataset.section===a))}function T(a){document.querySelectorAll("section.content").forEach(c=>{c.style.display="none"});const e=document.getElementById(a);e&&(e.style.display="",O(a))}function U(a){const e=w(a);document.querySelectorAll(".champ-card").forEach(c=>{const s=c.dataset.champName||"";c.style.display=!e||s.includes(e)?"":"none"})}function $(a){document.querySelectorAll(".cost-filter").forEach(e=>e.classList.toggle("active",e.dataset.cost===a)),document.querySelectorAll(".champ-cost-group").forEach(e=>{a==="all"?e.style.display="":e.style.display=e.dataset.costGroup===a?"":"none"})}function j(a){const e=w(a);document.querySelectorAll(".item-card").forEach(c=>{const s=c.dataset.itemName||"";c.style.display=!e||s.includes(e)?"":"none"})}function V(a){document.querySelectorAll(".item-cat-filter").forEach(e=>e.classList.toggle("active",e.dataset.cat===a)),document.querySelectorAll(".item-section").forEach(e=>{a==="all"?e.style.display="":e.style.display=e.dataset.itemCat===a?"":"none"})}function _(a){const e=w(a);document.querySelectorAll(".trait-card").forEach(c=>{const s=c.dataset.traitName||"";c.style.display=!e||s.includes(e)?"":"none"})}function G(a){const e=w(a);document.querySelectorAll(".augment-card").forEach(c=>{const s=c.dataset.augName||"";c.style.display=!e||s.includes(e)?"":"none"})}function J(a){document.querySelectorAll(".aug-tier-filter").forEach(e=>e.classList.toggle("active",e.dataset.tier===a)),document.querySelectorAll(".augment-card").forEach(e=>{a==="all"?e.style.display="":e.style.display=e.dataset.augTier===a?"":"none"})}function K(a){return N.champions?.find(e=>e.championId===a)}function D(a){const e=K(a);if(!e)return;const c=document.getElementById("champModal"),s=document.getElementById("modalChampDetails");s.innerHTML="",c.classList.remove("hidden"),c.setAttribute("aria-hidden","false");const o={1:"var(--cost-1)",2:"var(--cost-2)",3:"var(--cost-3)",4:"var(--cost-4)",5:"var(--cost-5)"},S={1:"var(--cost-1-bg)",2:"var(--cost-2-bg)",3:"var(--cost-3-bg)",4:"var(--cost-4-bg)",5:"var(--cost-5-bg)"},p=o[e.cost]||"var(--brand)",f=S[e.cost]||"var(--brand-subtle)";let n="";n+='<div class="cd-header">',n+='<img class="cd-portrait" src="'+(e.tileIcon||e.icon)+'" alt="'+u(e.name)+'" style="border:3px solid '+p+'" />',n+='<div class="cd-info">',n+='<h2 class="cd-name" style="color:'+p+'">'+u(e.name)+"</h2>",n+='<span class="cd-cost-pill" style="background:'+f+";color:"+p+";border:1px solid color-mix(in srgb,"+p+' 25%,transparent)">'+e.cost+"-Cost</span>",n+='<div class="cd-traits-list">',e.traits.forEach(l=>{n+='<span class="cd-trait-tag">'+u(l)+"</span>"}),n+="</div>",n+="</div></div>";const i=e.stats,g=typeof i.attackSpeed=="number"&&!Number.isInteger(i.attackSpeed)&&String(i.attackSpeed).split(".")[1]?.length>2?i.attackSpeed.toFixed(2):String(i.attackSpeed);if(n+='<div class="cd-stats-grid">',n+=v("HP",i.hp),n+=v("Mana",i.initialMana+" / "+i.mana),n+=v("Damage",i.damage),n+=v("Atk Spd",g),n+=v("Armor",i.armor),n+=v("MR",i.magicResist),n+=v("Range",i.range),n+=v("Crit",(i.critChance*100).toFixed(0)+"%"),n+="</div>",e.ability&&e.ability.name){if(n+='<div class="cd-ability-section"><h4>Ability</h4>',n+='<div class="cd-ability-box">',n+='<div class="cd-ability-header">',e.ability.icon&&(n+='<img class="cd-ability-icon" src="'+e.ability.icon+'" alt="'+u(e.ability.name)+'" loading="lazy" />'),n+='<span class="cd-ability-name">'+u(e.ability.name)+"</span>",n+="</div>",e.ability.desc){let l=e.ability.desc;const L=e.ability.variables||{};l=l.replace(/@([^@]+)@/g,function(b,E){var d=E.match(/^(.+?)\*(\d+(?:\.\d+)?)$/),A=d?d[1]:E,t=d?parseFloat(d[2]):1,r=L[A];if(!r||!Array.isArray(r))return"?";var y=[r[1],r[2],r[3]].map(function(m){if(m==null)return null;var k=m*t;return k%1===0?String(k):k.toFixed(1).replace(/\.0$/,"")}).filter(function(m){return m!==null});if(y.length===0)return"?";if(y.every(function(m){return m===y[0]}))return y[0];var B=["#a67c52","#94a3b8","#e6a030"];return y.map(function(m,k){return'<span style="color:'+B[k]+';font-weight:600">'+m+"</span>"}).join('<span style="color:var(--muted)">/</span>')});var I={scaleAD:"AD",scaleAP:"AP",scaleAS:"Attack Speed",scaleArmor:"Armor",scaleCrit:"Crit Chance",scaleCritMult:"Crit Damage",scaleDA:"Damage Amp",scaleDR:"Damage Reduction",scaleHealth:"Health",scaleMR:"Magic Resist",scaleSV:"Omnivamp"};l=l.replace(/%i:([^%]+)%/g,function(b,E){return I[E]||""}),l=l.replace(/<(?!\/?span\b)[^>]*>/g,"").replace(/&nbsp;/g," ").replace(/\s{2,}/g," ").trim(),n+='<p class="cd-ability-desc">'+l+"</p>"}n+="</div></div>"}s.innerHTML=n}function v(a,e){return'<div class="cd-stat"><div class="cd-stat-value">'+u(String(e))+'</div><div class="cd-stat-label">'+u(a)+"</div></div>"}function q(){const a=document.getElementById("champModal");a.classList.add("hidden"),a.setAttribute("aria-hidden","true")}function Q(a){return N.items?.find(e=>e.uniqueId===a)}function z(a){const e=Q(a);if(!e)return;const c=document.getElementById("itemModal"),s=document.getElementById("modalItemDetails");s.innerHTML="",c.classList.remove("hidden"),c.setAttribute("aria-hidden","false");let o='<div style="display:flex;align-items:center;gap:1rem;margin-bottom:1rem">';e.icon&&(o+='<img src="'+e.icon+'" alt="" style="width:64px;height:64px;border-radius:10px;border:2px solid var(--border)" />'),o+='<div><h3 style="margin:0;font-family:Exo 2,system-ui;text-transform:uppercase;letter-spacing:.03em">'+u(e.name)+"</h3>";const p={component:"Component",completed:"Completed",emblem:"Emblem",artifact:"Artifact",radiant:"Radiant",support:"Support",other:"Item"}[e.category]||"Item";if(o+='<span style="font-size:.75rem;color:var(--muted);text-transform:uppercase;font-weight:600">'+p+"</span>",o+="</div></div>",e.desc){let n=e.desc.replace(/<[^>]*>/g,"").replace(/@[^@]+@/g,"?");o+='<p style="color:var(--muted);font-size:.9rem;line-height:1.6">'+n+"</p>"}const f=Object.keys(e.effects||{}).filter(n=>!/^\{[0-9a-f]+\}$/i.test(n));f.length&&(o+='<div style="display:flex;flex-wrap:wrap;gap:.4rem;margin-top:.75rem">',f.forEach(n=>{const i=e.effects[n],g=typeof i=="number"&&!Number.isInteger(i)&&String(i).split(".")[1]?.length>2?i.toFixed(2):String(i);o+='<span style="font-size:.72rem;padding:.15rem .4rem;border-radius:6px;background:var(--surface-strong);color:var(--brand);font-weight:600;border:1px solid var(--border)">'+u(n)+": "+u(g)+"</span>"}),o+="</div>"),e.from&&e.from.length&&(o+='<div style="margin-top:1rem"><span style="font-size:.72rem;color:var(--muted);text-transform:uppercase;font-weight:700;letter-spacing:.04em">Recipe</span>',o+='<div style="display:flex;gap:.5rem;margin-top:.35rem">',e.from.forEach(n=>{const i=N.items?.find(g=>g.uniqueId===n);i&&(o+='<div style="display:flex;align-items:center;gap:.3rem;padding:.25rem .5rem;border-radius:8px;background:var(--surface-strong);border:1px solid var(--border)">',i.icon&&(o+='<img src="'+i.icon+'" alt="" style="width:24px;height:24px;border-radius:4px" />'),o+='<span style="font-size:.75rem;font-weight:600">'+u(i.name)+"</span></div>")}),o+="</div></div>"),s.innerHTML=o}function x(){const a=document.getElementById("itemModal");a.classList.add("hidden"),a.setAttribute("aria-hidden","true")}function C(a){const e=document.getElementById("playerModal");if(!e)return;e.classList.remove("hidden");const c=document.getElementById("playerInput");c&&a&&(c.value=a),c&&c.focus()}function M(){const a=document.getElementById("playerModal");if(!a)return;a.classList.add("hidden");const e=document.getElementById("playerSearchResults"),c=document.getElementById("playerProfile");e&&(e.innerHTML=""),c&&(c.innerHTML="",c.classList.add("hidden"))}function H(){const a=document.getElementById("ovSearch");if(!a)return;const e=a.value.trim();e&&C(e)}function W(){document.querySelectorAll(".nav-link").forEach(t=>t.addEventListener("click",()=>T(t.dataset.section))),document.querySelectorAll(".ql-card, .ov-stat").forEach(t=>t.addEventListener("click",()=>{t.dataset.section&&T(t.dataset.section)}));const a=document.getElementById("champSearch");a&&a.addEventListener("input",t=>U(t.target.value)),document.querySelectorAll(".cost-filter").forEach(t=>t.addEventListener("click",()=>$(t.dataset.cost))),document.querySelectorAll(".champ-card").forEach(t=>t.addEventListener("click",()=>{t.dataset.champId&&D(t.dataset.champId)}));const e=document.getElementById("itemSearch");e&&e.addEventListener("input",t=>j(t.target.value)),document.querySelectorAll(".item-cat-filter").forEach(t=>t.addEventListener("click",()=>V(t.dataset.cat))),document.querySelectorAll(".item-card").forEach(t=>t.addEventListener("click",()=>{t.dataset.itemId&&z(t.dataset.itemId)}));const c=document.getElementById("traitSearch");c&&c.addEventListener("input",t=>_(t.target.value)),document.querySelectorAll(".trait-desc").forEach(t=>{t.addEventListener("click",()=>{t.classList.toggle("expanded");const r=t.closest(".trait-card");if(!r)return;const y=r.querySelector(".trait-details");if(!y)return;const B=t.classList.contains("expanded");y.style.display=B?"flex":"none";const m=r.querySelector(".trait-breakpoints");m&&(m.style.display=B?"none":"flex")})}),document.querySelectorAll(".trait-champ-entry").forEach(t=>t.addEventListener("click",()=>{t.dataset.champId&&D(t.dataset.champId)})),document.querySelectorAll(".trait-champ-more").forEach(t=>t.addEventListener("click",()=>{const r=t.parentElement.querySelector(".trait-champ-overflow");r&&(r.style.display="contents",t.style.display="none")}));const s=document.getElementById("augmentSearch");s&&s.addEventListener("input",t=>G(t.target.value)),document.querySelectorAll(".aug-tier-filter").forEach(t=>t.addEventListener("click",()=>J(t.dataset.tier)));const o=document.getElementById("ovSearch");o&&o.addEventListener("keydown",t=>{t.key==="Enter"&&H()});const S=document.getElementById("ovSearchBtn");S&&S.addEventListener("click",H);const p=document.getElementById("closeModalBtn");p&&p.addEventListener("click",q);const f=document.getElementById("champModal");f&&f.addEventListener("click",t=>{t.target===f&&q()});const n=document.getElementById("closeItemModalBtn");n&&n.addEventListener("click",x);const i=document.getElementById("itemModal");i&&i.addEventListener("click",t=>{t.target===i&&x()});const g=document.getElementById("playerModalClose");g&&g.addEventListener("click",M);const I=document.getElementById("playerModal");I&&I.addEventListener("click",t=>{t.target===I&&M()}),document.addEventListener("keydown",t=>{t.key==="Escape"&&(q(),x(),M())});const l=document.getElementById("themeToggle");l&&l.addEventListener("click",()=>R(document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark"));const L=document.getElementById("productSwitcherBtn"),b=document.getElementById("productSwitcherDropdown");L&&b&&(L.addEventListener("click",t=>{t.stopPropagation(),b.classList.toggle("hidden")}),document.addEventListener("click",t=>{!b.contains(t.target)&&t.target!==L&&b.classList.add("hidden")}));const E=document.getElementById("headerSearchBtn"),d=document.getElementById("headerSearchInput"),A=document.getElementById("headerSearch");E&&E.addEventListener("click",()=>{if(!A.classList.contains("open")){A.classList.add("open"),d.focus();return}const t=d?d.value.trim():"";t&&C(t)}),d&&d.addEventListener("keydown",t=>{if(t.key==="Enter"){const r=d.value.trim();r&&C(r)}t.key==="Escape"&&(A.classList.remove("open"),d.value="")}),document.querySelectorAll(".region-btn").forEach(t=>t.addEventListener("click",()=>{h.lbRegion=t.dataset.region,document.querySelectorAll(".region-btn").forEach(r=>r.classList.toggle("active",r.dataset.region===h.lbRegion)),document.getElementById("lbStatus").textContent="Region: "+h.lbRegion.toUpperCase()+" — Connect Riot API to load data."})),document.querySelectorAll(".lb-tier-tab").forEach(t=>t.addEventListener("click",()=>{h.lbTier=t.dataset.tier,document.querySelectorAll(".lb-tier-tab").forEach(r=>r.classList.toggle("active",r.dataset.tier===h.lbTier)),document.getElementById("lbStatus").textContent=h.lbTier.charAt(0).toUpperCase()+h.lbTier.slice(1)+" — "+h.lbRegion.toUpperCase()+" — Connect Riot API to load data."}))}document.addEventListener("DOMContentLoaded",()=>{"scrollRestoration"in history&&(history.scrollRestoration="manual"),window.scrollTo(0,0),F(),W(),T("overview")});window.Scouted={showChampionDetails:D,closeChampModal:q,showItemDetails:z,closeItemModal:x,openPlayerModal:C,closePlayerModal:M,overviewSearch:H};
